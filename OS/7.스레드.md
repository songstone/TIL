# 스레드
- Light Weight Process
- 프로세스
    - 프로세스 간에는 각 프로세스의 데이터 접근 불가 -> IPC를 사용 해야 한다.
- 스레드
    - 하나의 프로세스에 여러개의 스레드 생성 가능
    - 스레드들은 동시에 실행 가능
    - 하나의 프로세스 안에 있으므로, 프로세스의 데이터를 모든 스레드에서 접근이 가능하다.
- 스레드에는 각기 실행이 가능한 stack과 레지스터가 존재
- 부모 프로세스로 부터 Code, Data, Heap 영역은 공유하지만 stack 영역은 스레드마다 독립적

## 스레드의 장점
- 사용자에 대한 응답성 향상
- **높은 자원 공유 효율**
    - IPC와 같은 번거로운 작업이 필요 없다.
    - 프로세스의 데이터를 모두 접근 가능

## 스레드 단점
- 하나의 스레드만 문제가 생겨도 전체 프로세스가 영향을 받는다.
- 너무 많은 스레드는 Context Switching이 많이 일어나게 해서 성능 저하를 일으킨다.

## 동기화(Synchronization)
- 작업들 사이에 실행 시기를 맞추는 것
- 공유 공간에 여러 스레드가 동일한 자원 접근시 동기화 이슈 발생

## 상호 배제(Mutual exclusion)
- 동기화 이슈 해결 방안
- 임계 자원(critical resource), 임계 영역(critical section)
- 여러 스레드가 변경하는 공유 변수에 대해 exclusive access 필요
- 어느 한 스레드가 공유 변수를 사용하는 동안 다른 스레드의 접근을 막기

## Mutex, Semaphore
- Critical Section(임계 영역)에 대한 접근을 막기위한 locking 메커니즘 필요
- Mutex(binary semaphore)
    - 임계 구역에 **하나의 스레드**만 들어갈 수 있다.
- Semaphore
    - 임계 구역에 **여러 스레드**가 들어갈 수 있다.
    - counter를 두어 리소스에 접근 가능한 스레드 수를 제어

## Deadlock
- 교착상태, 무한 대기 상태 : 두 개 이상의 작업이 서로 상대방의 작업이 끝나기 만을 기다려 다음 단계로 진행 되지 않는 상태. 프로세스, 스레드 둘 다 에서 발생 가능
- 발생조건
    1. 상호배제
    2. 점유대기
    3. 비선점
    4. 순환대기

## Starvation
- 기아 상태 : 특정 프로세스의 우선 순위가 낮아서 원하는 자원을 계속 할당 받지 못하는 상태
- deadlock과 starvation
    - deadlock은 여러 프로세스가 동일 자원 점유를 요청 할 때 발생
    - starvation은 여러 프로세스가 부족한 자원을 점유하기 위해 경쟁 할 때, 특정 프로세스는 영원히 자원 할당이 안되는 경우
- 프로세스의 우선 순위를 수시로 변경하여 해결